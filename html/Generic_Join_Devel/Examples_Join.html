<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Examples_Join</title>
</head>


<body>
<div class="head">
<h1>Theory Examples_Join</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Example instantiations and queries›</span></span>

<span class="keyword1"><span class="command">theory</span></span> Examples_Join
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="Generic_Join.html">Generic_Join</a> <a href="Proj_Code.html">Proj_Code</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹Instantiations›</span></span>

<span class="keyword1"><span class="command">global_interpretation</span></span> Max_getIJ<span class="main">:</span> getIJ <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="main"><span class="bound">_</span></span> <span class="bound">V</span><span class="main">.</span> <span class="main">(</span><span class="bound">V</span> <span class="main">-</span> <span class="main">{</span>Max <span class="bound">V</span><span class="main">}</span><span class="main">,</span> <span class="main">{</span>Max <span class="bound">V</span><span class="main">}</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">defines</span></span> Max_getIJ_genericJoin <span class="main">=</span> <span class="quoted"><span class="quoted">"Max_getIJ.genericJoin"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> Max_getIJ_wrapperGenericJoin <span class="main">=</span> <span class="quoted"><span class="quoted">"Max_getIJ.wrapperGenericJoin"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">standard</span> <span class="main">(</span><span class="operator">metis</span> Diff_disjoint Max_in One_nat_def Pair_inject Suc_1 Suc_le_mono card.insert_remove card.empty card.infinite card_insert_disjoint finite.emptyI inf_commute insert_Diff insert_absorb insert_is_Un insert_not_empty le_numeral_extra<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> not_numeral_le_zero sup_commute<span class="main">)</span>


<span class="keyword1"><span class="command">global_interpretation</span></span> Min_getIJ<span class="main">:</span> getIJ <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="main"><span class="bound">_</span></span> <span class="bound">V</span><span class="main">.</span> <span class="main">(</span><span class="main">{</span>Min <span class="bound">V</span><span class="main">}</span><span class="main">,</span> <span class="bound">V</span> <span class="main">-</span> <span class="main">{</span>Min <span class="bound">V</span><span class="main">}</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">defines</span></span> Min_getIJ_genericJoin <span class="main">=</span> <span class="quoted"><span class="quoted">"Min_getIJ.genericJoin"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> Min_getIJ_wrapperGenericJoin <span class="main">=</span> <span class="quoted"><span class="quoted">"Min_getIJ.wrapperGenericJoin"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">standard</span> <span class="main">(</span><span class="operator">metis</span> Diff_disjoint Min_in One_nat_def Pair_inject Suc_1 card.insert_remove card.empty card.infinite card_insert_disjoint finite.emptyI insert_Diff insert_absorb insert_is_Un insert_not_empty le_numeral_extra<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> not_less_eq_eq not_numeral_le_zero<span class="main">)</span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹Queries›</span></span>

<span class="keyword1"><span class="command">value</span></span> <span class="quoted"><span class="quoted">"Max_getIJ.genericJoin <span class="main">{</span><span class="main">0</span><span class="main">,</span> <span class="main">1</span><span class="main">}</span> <span class="main">{</span><span class="main">(</span><span class="main">{</span><span class="main">0</span> <span class="main">,</span> <span class="main">1</span><span class="main">}</span><span class="main">,</span> <span class="main">{</span><span class="main">[</span>Some <span class="main">(</span><span class="main">0</span> <span class="main">::</span> nat<span class="main">)</span><span class="main">,</span> Some <span class="main">0</span><span class="main">]</span><span class="main">,</span> <span class="main">[</span>Some <span class="main">1</span><span class="main">,</span> Some <span class="main">1</span><span class="main">]</span><span class="main">}</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="main">{</span><span class="main">0</span> <span class="main">,</span> <span class="main">1</span><span class="main">}</span><span class="main">,</span> <span class="main">{</span><span class="main">[</span>Some <span class="main">0</span><span class="main">,</span> Some <span class="main">0</span><span class="main">]</span><span class="main">,</span> <span class="main">[</span>Some <span class="main">0</span><span class="main">,</span> Some <span class="main">1</span><span class="main">]</span><span class="main">}</span><span class="main">)</span><span class="main">}</span> <span class="main">{}</span> <span class="main">::</span> nat table"</span></span>
<span class="keyword1"><span class="command">value</span></span> <span class="quoted"><span class="quoted">"Min_getIJ.genericJoin <span class="main">{</span><span class="main">0</span><span class="main">,</span> <span class="main">1</span><span class="main">}</span> <span class="main">{</span><span class="main">(</span><span class="main">{</span><span class="main">0</span> <span class="main">,</span> <span class="main">1</span><span class="main">}</span><span class="main">,</span> <span class="main">{</span><span class="main">[</span>Some <span class="main">(</span><span class="main">0</span> <span class="main">::</span> nat<span class="main">)</span><span class="main">,</span> Some <span class="main">0</span><span class="main">]</span><span class="main">,</span> <span class="main">[</span>Some <span class="main">1</span><span class="main">,</span> Some <span class="main">1</span><span class="main">]</span><span class="main">}</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="main">{</span><span class="main">0</span> <span class="main">,</span> <span class="main">1</span><span class="main">}</span><span class="main">,</span> <span class="main">{</span><span class="main">[</span>Some <span class="main">0</span><span class="main">,</span> Some <span class="main">0</span><span class="main">]</span><span class="main">,</span> <span class="main">[</span>Some <span class="main">0</span><span class="main">,</span> Some <span class="main">1</span><span class="main">]</span><span class="main">}</span><span class="main">)</span><span class="main">}</span> <span class="main">{}</span> <span class="main">::</span> nat table"</span></span>

<span class="keyword1"><span class="command">fun</span></span> <span class="entity">protoTableTriangle</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"nat <span class="main">⇒</span> nat table"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">protoTableTriangle</span> <span class="main">0</span> <span class="main">=</span> <span class="main">{</span><span class="main">[</span>Some <span class="main">0</span><span class="main">,</span> Some <span class="main">0</span><span class="main">]</span><span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">protoTableTriangle</span> <span class="main">(</span>Suc <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">protoTableTriangle</span> <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span> <span class="main">∪</span> <span class="main">{</span><span class="main">[</span>Some <span class="main">(</span>Suc <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span><span class="main">,</span> Some <span class="main">0</span><span class="main">]</span><span class="main">,</span> <span class="main">[</span>Some <span class="main">0</span><span class="main">,</span> Some <span class="main">(</span>Suc <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span><span class="main">]</span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">fun</span></span> <span class="entity">auxInsertNoneTriangle</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"nat tuple <span class="main">⇒</span> nat <span class="main">⇒</span> nat tuple"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">auxInsertNoneTriangle</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="main">0</span> <span class="main">=</span> None <span class="main">#</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">auxInsertNoneTriangle</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">#</span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span> <span class="main">(</span>Suc <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span> <span class="main">=</span> <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">#</span> <span class="main">(</span><span class="free">auxInsertNoneTriangle</span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">auxInsertNoneTriangle</span> <span class="main">[]</span> <span class="main">(</span>Suc <span class="free"><span class="bound"><span class="entity">v</span></span></span><span class="main">)</span> <span class="main">=</span> undefined"</span></span>

<span class="keyword1"><span class="command">fun</span></span> <span class="entity">insertNoneTriangle</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"nat table <span class="main">⇒</span> nat <span class="main">⇒</span> nat table"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">insertNoneTriangle</span> <span class="free"><span class="bound"><span class="entity">t</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">=</span> <span class="main">{</span>auxInsertNoneTriangle <span class="bound">x</span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">|</span> <span class="bound">x</span> <span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">t</span></span></span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">value</span></span> <span class="quoted"><span class="quoted">"set <span class="main">[</span><span class="main">0</span> <span class="main">..&lt;</span> <span class="numeral">5</span><span class="main">]</span>"</span></span>

<span class="keyword1"><span class="command">fun</span></span> <span class="entity">getTableTriangle</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"nat <span class="main">⇒</span> nat <span class="main">⇒</span> nat atable"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">getTableTriangle</span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="main">=</span> <span class="main">(</span><span class="main">{</span><span class="main">0</span><span class="main">,</span> <span class="main">1</span><span class="main">,</span> <span class="numeral">2</span><span class="main">}</span> <span class="main">-</span> <span class="main">{</span><span class="free"><span class="bound"><span class="entity">i</span></span></span><span class="main">}</span><span class="main">,</span> insertNoneTriangle <span class="main">(</span>protoTableTriangle <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">i</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">fun</span></span> <span class="entity">getQueryTriangle</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"nat <span class="main">⇒</span> nat query"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">getQueryTriangle</span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">=</span> <span class="main">{</span>getTableTriangle <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">0</span><span class="main">,</span> getTableTriangle <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">1</span><span class="main">,</span> getTableTriangle <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="numeral">2</span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">verticesTriangle</span> <span class="main">::</span> <span class="quoted">vertices</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">verticesTriangle</span> <span class="main">=</span> <span class="main">{</span><span class="main">0</span><span class="main">,</span> <span class="main">1</span><span class="main">,</span> <span class="numeral">2</span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">value</span></span> <span class="quoted"><span class="quoted">"getQueryTriangle <span class="numeral">2</span>"</span></span>

<span class="keyword1"><span class="command">value</span></span> <span class="quoted"><span class="quoted">"Max_getIJ.genericJoin verticesTriangle <span class="main">(</span>getQueryTriangle <span class="numeral">2</span><span class="main">)</span> <span class="main">{</span><span class="main">(</span><span class="main">{</span><span class="main">0</span><span class="main">,</span> <span class="numeral">2</span><span class="main">}</span><span class="main">,</span> <span class="main">{</span><span class="main">[</span>Some <span class="main">0</span><span class="main">,</span> None<span class="main">,</span> Some <span class="main">0</span><span class="main">]</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">value</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">let</span> <span class="bound">n</span> <span class="main">=</span> <span class="numeral">2</span> <span class="keyword1">in</span> <span class="keyword1">let</span> <span class="main">(</span><span class="main">(</span><span class="main"><span class="bound">_</span></span><span class="main">,</span> <span class="bound">A</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="main"><span class="bound">_</span></span><span class="main">,</span> <span class="bound">B</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="main"><span class="bound">_</span></span><span class="main">,</span> <span class="bound">C</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>getTableTriangle <span class="bound">n</span> <span class="main">0</span><span class="main">,</span> getTableTriangle <span class="bound">n</span> <span class="main">1</span><span class="main">,</span> getTableTriangle <span class="bound">n</span> <span class="numeral">2</span><span class="main">)</span> <span class="keyword1">in</span>
<span class="keyword1">let</span> <span class="bound">AB</span> <span class="main">=</span> join <span class="bound">A</span> True <span class="bound">B</span> <span class="keyword1">in</span> join <span class="bound">AB</span> True <span class="bound">C</span>"</span></span>
<span class="keyword1"><span class="command">value</span></span> <span class="quoted"><span class="quoted">"Min_getIJ.wrapperGenericJoin <span class="main">(</span>getQueryTriangle <span class="numeral">2</span><span class="main">)</span> <span class="main">{}</span>"</span></span>
<span class="keyword1"><span class="command">value</span></span> <span class="quoted"><span class="quoted">"Max_getIJ.wrapperGenericJoin <span class="main">(</span>getQueryTriangle <span class="numeral">2</span><span class="main">)</span> <span class="main">{}</span>"</span></span>
<span class="keyword1"><span class="command">value</span></span> <span class="quoted"><span class="quoted">"New_max.wrapperGenericJoin <span class="main">(</span>getQueryTriangle <span class="numeral">2</span><span class="main">)</span> <span class="main">{}</span>"</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</body>

</html>